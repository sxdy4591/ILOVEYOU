<!DOCTYPE html>
<html>
<head>
    <title>æƒ…äººèŠ‚æƒŠå–œ</title>
    <style>
        body {
            background: linear-gradient(45deg, #ff3864, #ff6b6b);
            height: 100vh;
            overflow: hidden;
            margin: 0;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32"><text x="8" y="24" style="font-size:20px;">â¤ï¸</text></svg>'), auto;
        }
		@keyframes pulse {
			0% { transform: scale(1); }
			50% { transform: scale(1.05); }
			100% { transform: scale(1); }
		}

		@keyframes blink {
			0% { opacity: 0.3; }
			50% { opacity: 1; }
			100% { opacity: 0.3; }
		}

		@keyframes shake {
			10%, 90% { transform: translateX(-1px); }
			20%, 80% { transform: translateX(2px); }
			30%, 50%, 70% { transform: translateX(-4px); }
			40%, 60% { transform: translateX(4px); }
		}

		/* ç²’å­åŠ¨ç”» */
		@keyframes trail {
			0% { opacity: 1; transform: scale(1); }
			100% { opacity: 0; transform: scale(0.1) translateY(-100px); }
		}

		/* æŠ–åŠ¨æ•ˆæœ */
		@keyframes shake {
			0% { transform: translateX(0); }
			25% { transform: translateX(10px); }
			50% { transform: translateX(-10px); }
			100% { transform: translateX(0); }
		}

		canvas {
			pointer-events: none;
		}

        .container {
            position: relative;
            height: 100vh;
            perspective: 1000px;
        }

        .heart {
            position: absolute;
            animation: fall 3s linear infinite;
            font-size: 24px;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(360deg); }
        }

        #mainButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 20px 40px;
            font-size: 24px;
            background: rgba(255,255,255,0.2);
            border: 3px solid white;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: 0.3s;
        }

        #mainButton:hover {
            background: rgba(255,255,255,0.4);
            transform: translate(-50%, -50%) scale(1.1);
        }

        .math-problem {
            display: none;
            position: absolute;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

        #finalMessage {
            display: none;
            position: absolute;
            width: 80%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255,255,255,0.95);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="loveText" style="color:white; text-align: center; padding-top: 20vh;">
            <h1 style="font-size: 3em; text-shadow: 0 0 10px rgba(0,0,0,0.3);">ç»™ç‰¹åˆ«çš„äºº</h1>
            <p>è‡ªä»é‡è§ä½ ï¼Œæˆ‘çš„ä¸–ç•Œå¼€å§‹è½¬åŠ¨...</p>
        </div>
        <button id="mainButton">ç‚¹å‡»æ¥æ”¶æˆ‘çš„å¿ƒæ„</button>
        <div id="finalMessage"></div>
    </div>

    <script>
        let clickCount = 0;
        const button = document.getElementById('mainButton');
        const messages = [
            "ä½ ä»¥ä¸ºä¼šæœ‰ç”œèœœå‘Šç™½ï¼Ÿå…ˆåšé“é¢˜å§ï¼",
            "âˆš256ç­‰äºï¼Ÿ",
            "80000Ã·2000ç­‰äºï¼Ÿ",
            "(3Ã—0.5+4)ç­‰äºï¼Ÿ",
            "å¥½äº†ä¸é—¹äº†ï¼Œæœ€åè®¤çœŸè¯´..."
        ];

        function createHearts() {
            for (let i = 0; i < 50; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'â¤ï¸';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.animationDelay = Math.random() * 5 + 's';
                document.body.appendChild(heart);
            }
        }

        button.addEventListener('click', () => {
            clickCount++;
            if (clickCount === 1) {
                button.style.display = 'none';
                const mathDiv = document.createElement('div');
                mathDiv.className = 'math-problem';
                mathDiv.innerHTML = `
                    <h2>${messages[0]}</h2>
                    <p>${messages[1]}</p>
                    <input type="number">
                    <button onclick="checkAnswer(16, this)">æäº¤</button>
                `;
                document.body.appendChild(mathDiv);
                mathDiv.style.top = '30vh';
                mathDiv.style.left = '50%';
                mathDiv.style.transform = 'translateX(-50%)';
                mathDiv.style.display = 'block';
            }
        });
// æ¥ç»­å‰æ–‡è„šæœ¬
		function checkAnswer(correctAnswer, buttonElement) {
			const parentDiv = buttonElement.parentElement;
			const inputValue = parseFloat(buttonElement.previousElementSibling.value);
			const errorMessages = [
				"è¿™å¯æ˜¯é€åˆ†é¢˜å‘€~", 
				"å†ä»”ç»†æƒ³æƒ³ï¼Ÿ", 
				"æç¤ºï¼šç­”æ¡ˆåœ¨é¢˜ç›®é‡Œ", 
				"ä½ ç¡®å®šè¦æ”¾å¼ƒå—ï¼Ÿ"
			];

			// å›ç­”æ­£ç¡®æ—¶çš„å¤„ç†
			if (inputValue === correctAnswer) {
				clickCount++;

				// é˜¶æ®µæ€§æ›´æ–°é—®é¢˜
				switch(clickCount) {
					case 2: // ç¬¬äºŒé¢˜
						parentDiv.innerHTML = `
							<h2>${messages[2]}</h2>
							<input type="number" placeholder="è¾“å…¥ç­”æ¡ˆ" autofocus>
							<button onclick="checkAnswer(40, this)" 
									style="background:#ff93ac;">ç»§ç»­æŒ‘æˆ˜</button>
							<p style="color:#666;font-size:12px;">ï¼ˆç­”é”™ä¼šé”å®š10ç§’å“¦ï¼‰</p>`;
						break;

					case 3: // ç¬¬ä¸‰é¢˜
						parentDiv.innerHTML = `
							<h2>${messages[3]}</h2>
							<input type="number" placeholder="å°æ•°ä¹Ÿè¦ç²¾ç¡®å“¦" step="0.1">
							<button onclick="checkAnswer(5.5, this)" 
									style="background:#ff7675;">ç»ˆæè€ƒéªŒ</button>
							<div style="display:flex;gap:10px;margin-top:10px;">
								<span style="color:#74b9ff;">â¤ï¸ çº¿ç´¢1ï¼šå…ˆä¹˜é™¤ååŠ å‡</span>
								<span style="color:#55efc4;">â¤ï¸ çº¿ç´¢2ï¼š3Ã—0.5=1.5</span>
							</div>`;
						break;

					case 4: // æœ€ç»ˆè¿‡æ¸¡
						parentDiv.innerHTML = `
							<div style="animation: pulse 1s infinite;">
								<h2>âœ¨ é€šå…³æˆåŠŸï¼ âœ¨</h2>
								<button onclick="showFinalSurprise()" 
										style="font-size:28px;padding:15px 30px;
											   background:linear-gradient(45deg,#ff6b6b,#ff8e53);">
									ğŸ’– ç‚¹å‡»æ¥å—çœŸæƒ…å‘Šç™½ ğŸ’–
								</button>
							</div>`;
						break;
				}

			} else { // å›ç­”é”™è¯¯å¤„ç†
				parentDiv.style.animation = 'shake 0.8s cubic-bezier(.36,.07,.19,.97) both';
				setTimeout(() => parentDiv.style.animation = '', 800);

				// éšæœºé”™è¯¯æç¤º
				const randomError = errorMessages[Math.floor(Math.random()*errorMessages.length)];
				parentDiv.innerHTML += `
					<div style="margin-top:10px;padding:10px;background:#ffe5e5;border-radius:5px;
								animation: blink 1s;">
						<span style="color:#ff4757;">âŒ ${randomError}</span>
						${clickCount === 2 ? '<br><span style="color:#2ed573;">ï¼ˆç­”æ¡ˆåŒ…å«å°æ•°ç‚¹ï¼‰</span>' : ''}
					</div>`;

				// é”™è¯¯é”å®šæœºåˆ¶
				if (clickCount >= 2) {
					buttonElement.disabled = true;
					buttonElement.textContent = 'é”å®šä¸­ï¼ˆ10ç§’ï¼‰';
					let countdown = 10;
					const timer = setInterval(() => {
						buttonElement.textContent = `é”å®šä¸­ï¼ˆ${countdown--}ç§’ï¼‰`;
						if(countdown < 0) {
							clearInterval(timer);
							buttonElement.disabled = false;
							buttonElement.textContent = 'é‡æ–°å°è¯•';
						}
					}, 1000);
				}
			}
		}


		function showFinalSurprise() {
			document.querySelector('.math-problem').remove();

			// å¼€å¯ç²’å­ç³»ç»Ÿ
			const canvas = document.createElement('canvas');
			canvas.style.position = 'fixed';
			canvas.style.top = 0;
			canvas.style.left = 0;
			document.body.appendChild(canvas);

			// ç²’å­ç³»ç»Ÿåˆå§‹åŒ–
			const ctx = canvas.getContext('2d');
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;

			class Particle {
				constructor(x, y) {
					this.x = x;
					this.y = y;
					this.size = Math.random() * 2 + 1;
					this.weight = Math.random() * 3 + 2;
				}
				update() {
					this.y -= this.weight;
					if (this.y < 0) this.y = canvas.height;
				}
				draw() {
					ctx.fillStyle = `hsl(${Math.random()*360}, 100%, 50%)`;
					ctx.beginPath();
					ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
					ctx.fill();
				}
			}

			// æƒ…è¯æ•°æ®åº“
			const loveWords = [
				"ä½ æ˜¯æˆ‘çš„ä¸€è§é’Ÿæƒ…ç”µè·¯",
				"æˆ‘ä»¬çš„çˆ±åƒé€’å½’å‡½æ•°æ°¸ä¸ç»ˆæ­¢",
				"ä½ æ˜¯æˆ‘çš„å”¯ä¸€è¿›ç¨‹ä¼˜å…ˆçº§",
				"æƒ³å’Œä½ å»ºç«‹æ°¸ä¹…TCPè¿æ¥"
			];

			// é¼ æ ‡è¿½è¸ªçˆ±å¿ƒ
			document.addEventListener('mousemove', (e) => {
				if(Math.random() > 0.8) {
					const trail = document.createElement('div');
					trail.className = 'heart';
					trail.style.left = e.pageX + 'px';
					trail.style.top = e.pageY + 'px';
					trail.style.animation = 'trail 1s linear forwards';
					document.body.appendChild(trail);
					setTimeout(() => trail.remove(), 1000);
				}
			});

			// è¯­éŸ³å‘Šç™½å½©è›‹
			const synth = window.speechSynthesis;
			function speak(text) {
				const utterance = new SpeechSynthesisUtterance(text);
				utterance.pitch = 1.5;
				utterance.rate = 0.8;
				synth.speak(utterance);
			}

			// é€ƒè·‘æŒ‰é’®é€»è¾‘
			function createEscapeButton() {
				const runBtn = document.createElement('button');
				runBtn.textContent = "ç‚¹ä¸åˆ°~";
				runBtn.style.position = 'fixed';
				runBtn.style.transition = '0.1s';

				runBtn.addEventListener('mouseover', () => {
					const newX = Math.random() * (window.innerWidth - 100);
					const newY = Math.random() * (window.innerHeight - 50);
					runBtn.style.transform = `translate(${newX}px, ${newY}px)`;
				});

				document.body.appendChild(runBtn);
				setTimeout(() => {
					runBtn.remove();
					alert("ä½ æ˜¯è·‘ä¸æ‰çš„~");
					document.getElementById('finalMessage').innerHTML = `
						<h2 style="font-size:2em">çœŸæ­£çš„å‘Šç™½</h2>
						<p style="font-size:1.2em">${loveWords[Math.floor(Math.random()*loveWords.length)]}</p>
						<button onclick="location.reload()">å†çœ‹ä¸€é</button>
					`;
					document.getElementById('finalMessage').style.display = 'block';
				}, 15000);
			}


			// ä¸»å¯åŠ¨é€»è¾‘
			createHearts();
			createEscapeButton();
			speak("å®å®ï¼Œè¦ä¸å’±ä¿©å¤„å¯¹è±¡å§ã€‚æ¯å¤©è·Ÿä½ åˆ†äº«æ–°é²œäº‹ï¼Œé™ªä½ æ‰“æ¸¸æˆï¼Œæ¶ˆæ¯ç§’å›ï¼Œç”µè¯ç§’æ¥ã€‚ç»å¸¸ç»™ä½ å‡†å¤‡å°æƒŠå–œï¼Œæ¯å¤©éƒ½ä¼šå¾ˆçˆ±å¾ˆçˆ±ä½ ã€‚æˆ‘ä¿è¯ä»¥åå¯¹ä½ å¥½ï¼Œä½ å…ˆè·Ÿæˆ‘åœ¨ä¸€èµ·è¡Œä¸è¡Œ ï¼Œæƒ…äººèŠ‚æˆ‘ç€æ€¥éª—ä½ é’±");
		}

    </script>
</body>
</html>
